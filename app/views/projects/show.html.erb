<style>
	.something {
		display:none;
	}
	.active{
		display:block !important;
	}
</style>

<div id="testdiv"></div>

<div class="row">
  <div class="col-md-6 col-md-offset-3 mainbod">
    <div style="padding-bottom:20px;">
      <h1><%= @project.name %></h1>
      <p><%= @project.description %></p>
      <p>Add Tags:</p>
      <%= form_for [@project, @tag], id: "muhform", data: { id: @project.id } do |f| %>
      <%= f.text_field :category, id: "category-input" %>
      <%= f.submit "Tag Dat Shit", id: "js-tag" %>
      <% end %>
      <div id="appendatshit"><%= render @project.categories %></div>
    <%= render partial: 'comments/form', locals: {comment: @comment, project: @project, parent: nil}  %>
    </div>
  </div>

</div>

<div class="row">
	<!-- likes -->
  <% if @like.heart == 0 %>
  <% hollow = "-outline" %>
  <% elsif @like.heart == 1 %>
  <% hollow = "" %>
  <% else %> 
   <% hollow = "" %>
  <% end %>
	<%= link_to "<i id='thing1' class='icon icon-size ion-ios-heart#{hollow}'></i>".html_safe, '#', id: "heart-heart", data: { id: @project.id }, method: :patch %>
  <%=  @project.likes.where(heart: 1 ).count %>
	<% link_to "hate this", project_dislike_path(@project), method: :patch %>
	<!-- end likes -->

  <div class="col-md-6 col-md-offset-3 mainbod">
    <%= render @project.comments.where(parent_id: nil) %>
  </div>
</div>

<script type="text/javascript" charset="utf-8">
  $(function(){
    $(".js-reply").on('click', function(){
       var id=$(this).data("id");
      $('#toggle-me-'+id).toggleClass('active')

    })
  })
</script>

<script>
  $(function(){
    $("#new_tag").submit(function(event){

      event.preventDefault();

      $muh_form = $(this).serialize();

      var id = $(this).data("id")

      var catchthepromise = $.post('/projects/' + id + '/tags', $muh_form);

      catchthepromise.done(function(tag){
          $("#appendatshit").append("<span class='btn tag-btn'><a class='tag-btn-inner' href='#'>"+tag["name"]+"</a><span class='tag-x'>X</span></span>");
          $("#category-input").val("");
          $("#js-tag").prop('disabled', false);
      })
    })
  })


</script>


<script>
  
$(function(){
  $("#heart-heart").click(function(event){
   
      //event.preventDefault();
   
    var pid = $(this).data("id");

    var url = '/projects/' + pid + '/like'
    var thingy = $.post(url)
    thingy.done(function(data){
        $("#thing1").toggleClass('ion-ios-heart')
        $("#thing1").toggleClass('ion-ios-heart-outline')    
    })
    return false; 
  })
})
</script>




